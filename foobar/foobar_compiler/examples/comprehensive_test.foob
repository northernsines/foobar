// FOOBAR Comprehensive Test
// Tests: OOP, Functional Programming, Operators, Inheritance

class VEHICLE {
    private integer speed;
    
    public Initialize(integer s) {
        thisclass.speed = s;
    }
    
    public integer GetSpeed() {
        return thisclass.speed;
    }
    
    public void SetSpeed(integer s) {
        thisclass.speed = s;
    }
}

class ELECTRIC {
    private integer batteryLevel;
    
    public Initialize(integer battery) {
        thisclass.batteryLevel = battery;
    }
    
    public integer GetBattery() {
        return thisclass.batteryLevel;
    }
}

class TESLA inherits VEHICLE, ELECTRIC {
    private string model;
    
    public Initialize(integer s, integer battery, string m) {
        parent.Initialize(s);
        thisclass.model = m;
        thisclass.batteryLevel = battery;
    }
    
    public void DisplayInfo() {
        CONSOLE.Print("Tesla Info:");
        CONSOLE.PrintInteger(thisclass.GetSpeed());
        CONSOLE.PrintInteger(thisclass.GetBattery());
    }
}

Main() {
    CONSOLE.Print("=== FOOBAR Comprehensive Test ===");
    CONSOLE.Print("");
    
    // Test 1: Classes and Multiple Inheritance
    CONSOLE.Print("1. Testing Classes & Multiple Inheritance");
    TESLA car = new TESLA(120, 85, "Model S");
    car.DisplayInfo();
    
    if(car isa TESLA) {
        CONSOLE.Print("Is a TESLA");
    }
    
    if(car isa VEHICLE) {
        CONSOLE.Print("Is a VEHICLE");
    }
    
    if(car isa ELECTRIC) {
        CONSOLE.Print("Is ELECTRIC");
    }
    
    CONSOLE.Print("");
    
    // Test 2: Comparison Operators
    CONSOLE.Print("2. Testing Comparison Operators");
    integer speed = car.GetSpeed();
    
    if(speed >= 100) {
        CONSOLE.Print("Speed >= 100: true");
    }
    
    if(speed <= 150) {
        CONSOLE.Print("Speed <= 150: true");
    }
    
    CONSOLE.Print("");
    
    // Test 3: Functional Programming
    CONSOLE.Print("3. Testing Functional Programming");
    integer[] numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    
    CONSOLE.Print("Original:");
    numbers.print();
    
    CONSOLE.Print("Evens only:");
    integer[] evens = numbers.filter(x -> x - (x / 2 * 2) == 0);
    evens.print();
    
    CONSOLE.Print("Doubled:");
    integer[] doubled = numbers.map(x -> x * 2);
    doubled.print();
    
    CONSOLE.Print("Sum:");
    integer sum = numbers.reduce((acc, x) -> acc + x, 0);
    CONSOLE.PrintInteger(sum);
    
    CONSOLE.Print("Chained (odds * 3):");
    integer[] chained = numbers
        .filter(x -> x - (x / 2 * 2) > 0)
        .map(x -> x * 3);
    chained.print();
    
    CONSOLE.Print("");
    
    // Test 4: Control Flow
    CONSOLE.Print("4. Testing Control Flow");
    
    integer count = 0;
    loop until(count >= 5) {
        count++;
    }
    CONSOLE.Print("Loop until count >= 5:");
    CONSOLE.PrintInteger(count);
    
    loop for(3) {
        CONSOLE.Print("For loop iteration");
    }
    
    CONSOLE.Print("");
    CONSOLE.Print("=== All Tests Passed! ===");
    
    return true;
}
