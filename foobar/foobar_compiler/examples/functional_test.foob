// FOOBAR Functional Programming - Complete Example
// Demonstrates all array transformation methods

Main() {
    CONSOLE.Print("====================================");
    CONSOLE.Print("  FOOBAR Functional Programming");
    CONSOLE.Print("====================================");
    CONSOLE.Print("");
    
    // Test 1: Map
    CONSOLE.Print("1. MAP - Transform each element");
    CONSOLE.Print("   Original: [1, 2, 3, 4, 5]");
    integer[] nums = [1, 2, 3, 4, 5];
    integer[] doubled = nums.map(x -> x * 2);
    CONSOLE.Print("   Doubled:  ");
    doubled.print();
    CONSOLE.Print("");
    
    // Test 2: Filter  
    CONSOLE.Print("2. FILTER - Keep only matching elements");
    CONSOLE.Print("   Numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]");
    integer[] range = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    integer[] evens = range.filter(x -> x - (x / 2 * 2) == 0);
    CONSOLE.Print("   Evens only: ");
    evens.print();
    CONSOLE.Print("");
    
    // Test 3: Reduce (Sum)
    CONSOLE.Print("3. REDUCE - Combine into single value");
    CONSOLE.Print("   Sum of [1, 2, 3, 4, 5]:");
    integer sum = nums.reduce((acc, x) -> acc + x, 0);
    CONSOLE.Print("   Result: ");
    CONSOLE.PrintInteger(sum);
    CONSOLE.Print("");
    
    // Test 4: Reduce (Product)
    CONSOLE.Print("4. REDUCE - Product");
    CONSOLE.Print("   Product of [1, 2, 3, 4, 5]:");
    integer product = nums.reduce((acc, x) -> acc * x, 1);
    CONSOLE.Print("   Result: ");
    CONSOLE.PrintInteger(product);
    CONSOLE.Print("");
    
    // Test 5: Chaining
    CONSOLE.Print("5. CHAINING - Combine operations");
    CONSOLE.Print("   Filter odds, then triple them:");
    integer[] result = range
        .filter(x -> x - (x / 2 * 2) > 0)
        .map(x -> x * 3);
    CONSOLE.Print("   ");
    result.print();
    CONSOLE.Print("");
    
    // Test 6: Sort
    CONSOLE.Print("6. SORT - Order elements");
    integer[] unsorted = [7, 2, 9, 1, 5, 3];
    CONSOLE.Print("   Before: ");
    unsorted.print();
    integer[] sorted = unsorted.sort();
    CONSOLE.Print("   After:  ");
    sorted.print();
    CONSOLE.Print("");
    
    // Test 7: Unique
    CONSOLE.Print("7. UNIQUE - Remove duplicates");
    integer[] dupes = [1, 2, 2, 3, 1, 4, 3, 5];
    CONSOLE.Print("   Before: ");
    dupes.print();
    integer[] unique = dupes.unique();
    CONSOLE.Print("   After:  ");
    unique.print();
    CONSOLE.Print("");
    
    // Test 8: Find
    CONSOLE.Print("8. FIND - First matching element");
    CONSOLE.Print("   Find first number > 5 in [1,3,5,7,9]:");
    integer[] search = [1, 3, 5, 7, 9];
    integer found = search.find(x -> x > 5);
    CONSOLE.Print("   Found: ");
    CONSOLE.PrintInteger(found);
    CONSOLE.Print("");
    
    CONSOLE.Print("====================================");
    CONSOLE.Print("  All tests passed!");
    CONSOLE.Print("====================================");
    
    return true;
}
